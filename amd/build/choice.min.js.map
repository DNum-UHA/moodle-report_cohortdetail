{"version":3,"file":"choice.min.js","sources":["../src/choice.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * A module for the report_cohortdetail report.\n * It change the form by disable the display of the cohort type not selected.\n *\n * @module     report_cohortdetail/choice\n * @copyright  2024 DNum UHA\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = () => {\n    // We get the cohort choice element\n    const cohortChoice = document.querySelectorAll('input[name=\"choice\"]');\n\n    // We add an event listener to the cohort choice elements\n    cohortChoice.forEach((choice) => {\n        choice.addEventListener('change', (event) => {\n            // We get the choice value\n            const selectedCohort = event.target.value;\n\n            // We add the value to the localsession\n\n            sessionStorage.setItem('selectedCohort', selectedCohort);\n\n            // If the value is system we verify if the system form is visible and if the category form is hidden\n            if (selectedCohort === 'system') {\n                let sysform = document.querySelector('.searchformsys');\n                // We verify if it contains the class d-none\n                if (sysform.classList.contains('d-none')) {\n                    sysform.classList.remove('d-none');\n                }\n                let catform = document.querySelector('.searchformcategory');\n                // We verify if it contains the class d-none\n                if (!catform.classList.contains('d-none')) {\n                    catform.classList.add('d-none');\n                }\n            } else if (selectedCohort === 'category') {\n                let sysform = document.querySelector('.searchformsys');\n                // We verify if it contains the class d-none\n                if (!sysform.classList.contains('d-none')) {\n                    sysform.classList.add('d-none');\n                }\n                let catform = document.querySelector('.searchformcategory');\n                // We verify if it contains the class d-none\n                if (catform.classList.contains('d-none')) {\n                    catform.classList.remove('d-none');\n                }\n            }\n        });\n    });\n\n    // We verify if the localsession contains the selectedCohort value\n    let valuesession = sessionStorage.getItem('selectedCohort');\n    if (valuesession) {\n        // We check the good radio button\n        document.querySelector('input[name=\"choice\"][value=\"' + valuesession + '\"]').checked = true;\n    }\n\n    // At the initial loading of the page we verify the value of the cohort choice element\n    const selectedCohort = document.querySelector('input[name=\"choice\"]:checked').value;\n\n    // If the value is system we verify if the system form is visible and if the category form is hidden\n    if (selectedCohort === 'system') {\n        let sysform = document.querySelector('.searchformsys');\n        // We verify if it contains the class d-none\n        if (sysform.classList.contains('d-none')) {\n            sysform.classList.remove('d-none');\n        }\n        let catform = document.querySelector('.searchformcategory');\n        // We verify if it contains the class d-none\n        if (!catform.classList.contains('d-none')) {\n            catform.classList.add('d-none');\n        }\n    } else if (selectedCohort === 'category') {\n        let sysform = document.querySelector('.searchformsys');\n        // We verify if it contains the class d-none\n        if (!sysform.classList.contains('d-none')) {\n            sysform.classList.add('d-none');\n        }\n        let catform = document.querySelector('.searchformcategory');\n        // We verify if it contains the class d-none\n        if (catform.classList.contains('d-none')) {\n            catform.classList.remove('d-none');\n        }\n    }\n};\n"],"names":["document","querySelectorAll","forEach","choice","addEventListener","event","selectedCohort","target","value","sessionStorage","setItem","sysform","querySelector","classList","contains","remove","catform","add","valuesession","getItem","checked"],"mappings":"+JAwBoB,KAEKA,SAASC,iBAAiB,wBAGlCC,SAASC,SAClBA,OAAOC,iBAAiB,UAAWC,cAEzBC,eAAiBD,MAAME,OAAOC,SAIpCC,eAAeC,QAAQ,iBAAkBJ,gBAGlB,WAAnBA,eAA6B,KACzBK,QAAUX,SAASY,cAAc,kBAEjCD,QAAQE,UAAUC,SAAS,WAC3BH,QAAQE,UAAUE,OAAO,cAEzBC,QAAUhB,SAASY,cAAc,uBAEhCI,QAAQH,UAAUC,SAAS,WAC5BE,QAAQH,UAAUI,IAAI,eAEvB,GAAuB,aAAnBX,eAA+B,KAClCK,QAAUX,SAASY,cAAc,kBAEhCD,QAAQE,UAAUC,SAAS,WAC5BH,QAAQE,UAAUI,IAAI,cAEtBD,QAAUhB,SAASY,cAAc,uBAEjCI,QAAQH,UAAUC,SAAS,WAC3BE,QAAQH,UAAUE,OAAO,qBAOrCG,aAAeT,eAAeU,QAAQ,kBACtCD,eAEAlB,SAASY,cAAc,+BAAiCM,aAAe,MAAME,SAAU,SAIrFd,eAAiBN,SAASY,cAAc,gCAAgCJ,SAGvD,WAAnBF,eAA6B,KACzBK,QAAUX,SAASY,cAAc,kBAEjCD,QAAQE,UAAUC,SAAS,WAC3BH,QAAQE,UAAUE,OAAO,cAEzBC,QAAUhB,SAASY,cAAc,uBAEhCI,QAAQH,UAAUC,SAAS,WAC5BE,QAAQH,UAAUI,IAAI,eAEvB,GAAuB,aAAnBX,eAA+B,KAClCK,QAAUX,SAASY,cAAc,kBAEhCD,QAAQE,UAAUC,SAAS,WAC5BH,QAAQE,UAAUI,IAAI,cAEtBD,QAAUhB,SAASY,cAAc,uBAEjCI,QAAQH,UAAUC,SAAS,WAC3BE,QAAQH,UAAUE,OAAO"}